{% extends "main1.html" %}
{% block title %}Results{% endblock%}
{%block content%}
{% with messages=get_flashed_messages() %}
{%if messages%}
<p>{{messages[0]}}</p>
{% endif %}
{% endwith  %}
<button type="button" class="btn btn-outline-primary"><a href="/">Home</a></button>
<!-- <p>{{max}}</p> -->
<div class="row w-100">
{%for i in names%}

<div class="col-4">
  <h1 class="text-center text-info">{{regions[i]}}</h1>
  <canvas id="chart{{i}}" width="400" height="400"  ></canvas>
  <h5 class="text-center" id="rmse{{i}}"></h5>
</div>

<!-- <p>{{max[i]}}</p> -->
{%endfor%}
</div>
{%for j in [1,2,3,4,5,6,7]%}
<h1 class="text-center d-block mx-auto text-primary "><button type="button" name="button" onclick="getcharts({{j}})">{{models[j-1]}}</button></h1>
<div class="row w-100">
{%for i in names%}

<!-- <div class="col-4">
  <h1 class="text-center text-info">{{regions[i]}}</h1>
  <canvas id="chart{{i}}{{j}}" width="400" height="400"  ></canvas>

  <h5 class="text-center" >RMSE: {{t[j][i]}}</h5>
</div> -->
<!-- <p>{{max[i]}}</p> -->
{%endfor%}
</div>
{%endfor%}
<script type="text/javascript">
  bar = {}
  max = {}
  rmse = {}
  {%for j in [1,2,3,4,5,6,7]%}
  bar1 = {}
  max1 = {}
  rmse1 = {}
  {%for i in names%}
  var barData = {
    labels : [
      {% for item in labels %}
        "{{ item }}",
      {% endfor %}
    ],

    datasets : [{
      label: "Actual",
      fillColor: "rgba(253,153,153,0.2)",
      strokeColor: "rgba(253,153,153,1)",
      pointColor: "rgba(253,153,153,1)",
      pointStrokeColor: "#fff",
      pointHighlightFill: "#fff",
      pointHighlightStroke: "rgba(151,187,205,1)",
      bezierCurve : false,
      data : [
  {% for item in values1[j][i] %}
          {{ item }},
        {% endfor %}]
      },{
        label:"Predicted",
        fillColor: "rgba(151,187,205,0.2)",
        strokeColor: "rgba(151,187,205,1)",
        pointColor: "rgba(151,187,205,1)",
        pointStrokeColor: "#fff",
        pointHighlightFill: "#fff",
        pointHighlightStroke: "rgba(151,187,205,1)",
        bezierCurve : false,
        data : [
    {% for item in values[j][i] %}
            {{ item }},
          {% endfor %}]
        }
  ]
  }

  Chart.defaults.global.animationSteps = 50;
  Chart.defaults.global.tooltipYPadding = 16;
  Chart.defaults.global.tooltipCornerRadius = 0;
  Chart.defaults.global.tooltipTitleFontStyle = "normal";
  Chart.defaults.global.tooltipFillColor = "rgba(0,0,0,0.8)";
  Chart.defaults.global.animationEasing = "easeOutBounce";
  Chart.defaults.global.responsive = false;
  Chart.defaults.global.scaleLineColor = "black";
  Chart.defaults.global.scaleFontSize = 16;
  bar1['{{i}}'] = barData;
  max1['{{i}}'] = {{max[j][i]}};
  rmse1['{{i}}'] = {{t[j][i]}}
  {%endfor%}
  bar[{{j}}] = bar1;
  max[{{j}}] = max1;
  rmse[{{j}}] = rmse1;
  {%endfor%}
  // get bar chart canvas
  function getcharts(j){
  {%for i in names%}
  var rm = document.getElementById("rmse{{i}}");
  rm.innerHTML = rmse[j]['{{i}}'];
  var mychart = document.getElementById("chart{{i}}").getContext("2d");

  steps = 10;

  max4 = max[j]['{{i}}'];
  // draw bar chart
  var LineChartDemo = new Chart(mychart).Line(bar[j]['{{i}}'], {
    scaleOverride: true,
    scaleSteps: steps,
    scaleStepWidth: Math.ceil(max4 / steps),
    scaleStartValue: 0,
    scaleShowVerticalLines: true,
    scaleShowGridLines : true,
    barShowStroke : true,
    scaleShowLabels: true,
    bezierCurve: false,
    legend: {
         position: 'top',
         display: true,
         labels: {
             fontColor: 'rgb(255, 99, 132)'
         }
     },
     title: {
   display: true,
   text: 'World population per region (in millions)'
  }
  });
{%endfor%}
}
getcharts(0);
</script>
{%endblock%}
